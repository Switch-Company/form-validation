/**
 * @switch-company/form-validation - Extend checkvalidity of forms and trigger invalid and valid events on fields
 * @version v1.0.0
 * @link undefined
 * @license ISC
 **/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.formValidation=e()}(this,function(){"use strict";var t=window.Element.prototype.matches||window.Element.prototype.matchesSelector||window.Element.prototype.mozMatchesSelector||window.Element.prototype.msMatchesSelector||window.Element.prototype.oMatchesSelector||window.Element.prototype.webkitMatchesSelector;function e(t,e,i){var n={bubbles:!0,cancelable:!1};i&&(n.detail=i);var o=new window.CustomEvent(e,n);t.dispatchEvent(o)}var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var l=o.get;return void 0!==l?l.call(n):void 0},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=function(){function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,o),this.el=n,this.el.validator=this,this._invalid=[],this._customRules=r.customRules||[],this._fieldValidation=function(i,n){var o=i.validity.valid,r={validityState:"valid"};if(!o)for(var l in i.validity)"valid"===r.validityState&&i.validity[l]&&"customError"!==l&&(r.validityState=l);return n&&o&&!i.disabled&&(i.required||i.value.length>0)&&n.every(function(e){if(t.call(i,e.match)){var n=e.test(i);return!(!n||"string"==typeof n)||(r.validityState=n||"customMismatch",!1)}return!0}),"valid"===r.validityState?e(i,"valid",r):e(i,"invalid",r),"valid"===r.validityState}.bind(this)}return n(o,[{key:"_checkSingleValidity",value:function(t){var e=this._fieldValidation(t,this._customRules),i=this._invalid.indexOf(t);return e||-1!==i?e&&i>-1&&this._invalid.splice(i,1):this._invalid.push(t),e}},{key:"checkValidity",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return e.elements||"FIELDSET"===e.nodeName?(this._invalid.length=0,Array.from(e.elements||e.querySelectorAll("input, textarea, select")).forEach(function(e){e.willValidate&&"submit"!==e.type&&t._checkSingleValidity(e)}),0===this._invalid.length):this._checkSingleValidity(e)}},{key:"invalid",get:function(){return this._invalid}}]),o}();return function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l),n(e,[{key:"_checkSingleValidity",value:function(t){var i=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_checkSingleValidity",this).call(this,t),n=t.closest("fieldset");if(!n)return i;var r=this.fieldset(n),l=r._invalid.indexOf(t);return i||-1!==l?i&&l>-1&&r._invalid.splice(l,1):r._invalid.push(t),i}},{key:"checkValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;if("FIELDSET"!==t.nodeName)return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"checkValidity",this).call(this,t);var i=this.fieldsets.find(function(e){return e.el==t});return i?i.checkValidity():void 0}},{key:"fieldset",value:function(t){if(this.el.contains(t))return t.validator||new l(t,{customRules:this._customRules})}},{key:"fieldsets",get:function(){var t=this;return Array.from(this.el.querySelectorAll("fieldset")).map(function(e){return e.validator||new l(e,{customRules:t._customRules})})}}]),e}()});
